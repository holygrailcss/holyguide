---
layout: base-clean.njk
---

{# Importamos home.css únicamente para el token-home. #}
<link rel="stylesheet" href="/assets/css/home.css">

<!-- Token home: 3 columnas, navegación horizontal con botones y GSAP -->
<div class="hg-d-flex hg-flex-column hg-min-h-100vh hg-h-100vh">
  <!-- Botones de navegación: texto girado 90° -->
  <button type="button" class="btn btn-tertiary  hg-home-nav-btn hg-home-nav-btn--prev" id="hg-home-nav-prev" aria-label="Columna anterior" disabled>
    <span class="hg-home-nav-btn__text">men new season AW 26</span>
  </button>
  <button type="button" class=" btn btn-tertiary  hg-home-nav-btn hg-home-nav-btn--next" id="hg-home-nav-next" aria-label="Columna siguiente">
    <span class="hg-home-nav-btn__text">women new season AW 26</span>
  </button>

  
  <!-- Wrapper: recorta a una columna visible, el row se desplaza con GSAP -->
  <div class="hg-home-row-cols-wrap">
    <div class="hg-home-row-cols" id="hg-home-row-cols" data-active="0">
    <!-- Columna 1 -->
    <section class="hg-home-row-cols__col hg-h-100-percent hg-min-h-0 hg-overflow-y-auto px-24">
      <div class="hg-d-flex hg-flex-column hg-gap-y-24">

        <div class="hg-home-box hg-home-box-animated">
          <img src="/assets/static/home/foto1.jpg" alt="Columna 1">
        </div>

        <div class="hg-home-box">
          <img src="/assets/static/home/foto1.jpg" alt="Columna 1">
        </div>

        <div class="hg-home-box">
          <img src="/assets/static/home/foto1.jpg" alt="Columna 1">
        </div>

        <div class="hg-home-box">
          <img src="/assets/static/home/foto1.jpg" alt="Columna 1">
        </div>

      </div>
      <footer class="hg-w-100-percent p-24 hg-text-center" >
        <p class="text-m">Footer – HolyGrail5</p>
      </footer>
    </section>
    <!-- Columna 2 -->
    <section class="hg-home-row-cols__col hg-h-100-percent hg-min-h-0 hg-overflow-y-auto px-24">
      <div class="hg-d-flex hg-flex-column hg-gap-y-24">
        <div class="hg-home-box">
          <div class="hg-aspect-2-3  hg-h-100-percent">
            <img class="hg-aspect-image" src="/assets/static/home/foto2.jpg" alt="Columna 2">
          </div>
        </div>

        <div class="hg-home-box p-104">
          <img src="/assets/static/home/foto2.jpg" alt="Columna 2">
        </div>

        <div class="hg-home-box p-104">
          <img src="/assets/static/home/foto2.jpg" alt="Columna 2">
        </div>

        <div class="hg-home-box">
          <img src="/assets/static/home/foto2.jpg" alt="Columna 2">
        </div>
      </div>
      <footer class="hg-w-100-percent p-24 hg-text-center" >
        <p class="text-m">Footer – HolyGrail5</p>
      </footer>
    </section>  
    <!-- Columna 3 -->
    <section class="hg-home-row-cols__col hg-h-100-percent hg-min-h-0 hg-overflow-y-auto px-24">
      <div class="hg-d-flex hg-flex-column hg-gap-y-24">  
        <div class="hg-home-box">
          <img src="/assets/static/home/foto3.jpg" alt="Columna 3">
        </div>

      </div>
      <footer class="hg-w-100-percent p-24 hg-text-center" >
        <p class="text-m">Footer – HolyGrail5</p>
      </footer>
    </section>
  </div>
  </div>
  <!-- Footer debajo de las columnas -->

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script>
(function() {
  var row = document.getElementById('hg-home-row-cols');
  var btnPrev = document.getElementById('hg-home-nav-prev');
  var btnNext = document.getElementById('hg-home-nav-next');
  if (!row || !btnPrev || !btnNext) return;

  var totalCols = 3;
  var currentIndex = 0;

  function getColWidthPx() {
    return window.innerWidth - 200;
  }

  var cols = row ? row.querySelectorAll('.hg-home-row-cols__col') : [];

  var fadeStartRatio = 0.001;

  function updateBoxOpacity(col) {
    if (!col) return;
    var colRect = col.getBoundingClientRect();
    var colHeight = colRect.height;
    var fadeStartPx = fadeStartRatio * colHeight;
    var boxes = col.querySelectorAll('.hg-home-box');
    boxes.forEach(function(box) {
      var boxRect = box.getBoundingClientRect();
      var boxTop = boxRect.top - colRect.top;
      var boxHeight = boxRect.height;
      var opacity = Math.min(1, Math.max(0, (boxTop + boxHeight) / (fadeStartPx + boxHeight)));
      box.style.opacity = String(opacity);
    });
  }

  function setupScrollFade() {
    cols.forEach(function(col) {
      col.addEventListener('scroll', function() { updateBoxOpacity(col); });
      updateBoxOpacity(col);
    });
  }

  function goToIndex(index) {
    if (index < 0 || index >= totalCols) return;
    currentIndex = index;
    row.setAttribute('data-active', String(index));
    var x = -currentIndex * getColWidthPx();
    gsap.to(row, { x: x, duration: 0.5, ease: 'power3.out' });
    cols.forEach(function(col, i) {
      gsap.to(col, { scale: i === currentIndex ? 1 : 0.5, duration: 0.5, ease: 'power3.out' });
    });
    btnPrev.disabled = currentIndex === 0;
    btnNext.disabled = currentIndex === totalCols - 1;
  }

  btnPrev.addEventListener('click', function() {
    if (currentIndex > 0) goToIndex(currentIndex - 1);
  });
  btnNext.addEventListener('click', function() {
    if (currentIndex < totalCols - 1) goToIndex(currentIndex + 1);
  });

  window.addEventListener('resize', function() {
    goToIndex(currentIndex);
    cols.forEach(function(col) { updateBoxOpacity(col); });
  });

  /* Estado inicial: columna 1 al 100%, resto al 50% */
  cols.forEach(function(col, i) {
    gsap.set(col, { scale: i === 0 ? 1 : 0.5 });
  });
  goToIndex(0);
  setupScrollFade();
})();
</script>
